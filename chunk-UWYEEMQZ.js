import{Aa as k,Ca as v,Da as x,Ia as T,Ma as Y,Va as w,X as C,Xa as I,Y as y,Ya as c,Za as u,_a as B,bb as H,cb as b,eb as M,fa as E,fb as _,gb as S,hb as g,ib as P}from"./chunk-SQZNMEZU.js";var z=["sceneContainer"],F=["backgroundCanvas"],V=class O{constructor(e,n){this.renderer=e;this.el=n}sceneContainerRef;canvasRef;rainCount=150;butterflyCount=5;isControlsOpen=!1;sunVisible=!1;ctx;ngAfterViewInit(){this.canvasRef&&(this.ctx=this.canvasRef.nativeElement.getContext("2d"),this.drawScene(),this.updateElements(".rain",this.rainCount,this.createRaindrop.bind(this)),this.updateElements(".butterfly",this.butterflyCount,this.createButterfly.bind(this)))}onResize(){this.drawScene()}onRainSliderChange(e){let n=e.target;this.rainCount=parseInt(n.value,10),this.updateElements(".rain",this.rainCount,this.createRaindrop.bind(this)),this.rainCount===0&&!this.sunVisible?(this.drawSun(),this.sunVisible=!0):this.rainCount>0&&this.sunVisible&&(this.clearSun(),this.sunVisible=!1)}clearSun(){if(!this.ctx)return;let e=this.canvasRef.nativeElement,n=40,t=e.width-n-80,i=n+60,o=n*2.2;this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(t,i,o,0,Math.PI*2),this.ctx.clip(),this.ctx.clearRect(t-o,i-o,o*2,o*2),this.ctx.restore()}onButterflySliderChange(e){let n=e.target;this.butterflyCount=parseInt(n.value,10),this.updateElements(".butterfly",this.butterflyCount,this.createButterfly.bind(this))}drawScene(){if(!this.ctx)return;let e=this.canvasRef.nativeElement;e.width=this.el.nativeElement.offsetWidth,e.height=this.el.nativeElement.offsetHeight,this.ctx.clearRect(0,0,e.width,e.height);let n=["#6B8E23","#556B2F","#8FBC8F"],t=this.drawMountainRange(n[0],.85,200,20),i=this.drawMountainRange(n[1],.75,150,20),o=this.drawMountainRange(n[2],.65,100,20);this.plantTreesOnHill(o,50),this.plantTreesOnHill(i,60),this.plantTreesOnHill(t,70),this.rainCount==0&&this.drawSun(),console.log("Canvas size:",e.width,e.height)}drawMountainRange(e,n,t,i){let o=this.canvasRef.nativeElement,r=this.ctx,s=r.createLinearGradient(0,o.height*n,0,o.height);s.addColorStop(0,e),s.addColorStop(1,"#3a3a3a"),r.fillStyle=s,r.beginPath(),r.moveTo(-40,o.height);let a=[];for(let l=0;l<=i+2;l++){let h=(o.width+80)/i*l-40,p=o.height*n-(Math.random()*t+t/2);if(a.push({x:h,y:p}),l===0)r.lineTo(h,p);else{let d=a[l-1],m=(d.x+h)/2,f=(d.y+p)/2;r.quadraticCurveTo(d.x,d.y,m,f)}}return r.lineTo(o.width+40,o.height),r.lineTo(-40,o.height),r.closePath(),r.fill(),a}plantTreesOnHill(e,n){let t=this.canvasRef.nativeElement;for(let i=0;i<n;i++){let o=Math.random()*t.width,r=t.width/(e.length-1),s=Math.floor(o/r);if(s<0||s>=e.length-1)continue;let a=e[s],l=e[s+1],h=(o-a.x)/(l.x-a.x||1),d=a.y+(l.y-a.y)*h+50,m=Math.min(t.height-20,d+80),f=t.height-300+Math.random()*300;f<t.height&&this.drawTree(o,f)}}drawSun(){if(!this.ctx)return;let e=this.canvasRef.nativeElement,n=40,t=e.width-n-80,i=n+60;this.ctx.beginPath(),this.ctx.arc(t,i,n,0,Math.PI*2),this.ctx.fillStyle="#FFD700",this.ctx.fill(),this.ctx.closePath();let o=this.ctx.createRadialGradient(t,i,n*.5,t,i,n*2);o.addColorStop(0,"rgba(255, 215, 0, 0.5)"),o.addColorStop(1,"rgba(255, 215, 0, 0)"),this.ctx.beginPath(),this.ctx.arc(t,i,n*2,0,Math.PI*2),this.ctx.fillStyle=o,this.ctx.fill()}drawTree(e,n){let t=this.ctx;if(!t)return;let i=3+Math.random(),o=12+Math.random()*4,r=e-i/2,s=n-o,a=t.createLinearGradient(r,s,r,n);a.addColorStop(0,"#7B3F00"),a.addColorStop(1,"#3E2615"),t.fillStyle=a,t.fillRect(r,s,i,o);let l=30+Math.random()*15,h=3,p=l/h,d=["#2E8B57","#1E5631","#4CAF50","#3C9D55"];t.fillStyle=d[Math.floor(Math.random()*d.length)];for(let m=0;m<h;m++){let f=n-o-m*p,R=22-m*6;t.beginPath(),t.moveTo(e,f-p),t.lineTo(e-R/2,f),t.lineTo(e+R/2,f),t.closePath(),t.fill()}t.fillStyle="rgba(0, 0, 0, 0.1)",t.beginPath(),t.ellipse(e,n,6,2,0,0,Math.PI*2),t.fill()}updateElements(e,n,t){if(!this.sceneContainerRef)return;let i=this.sceneContainerRef.nativeElement.querySelectorAll(e),o=i.length-n;for(let r=0;r<o;r++)i[r]&&this.renderer.removeChild(this.sceneContainerRef.nativeElement,i[r]);for(let r=0;r<n-i.length;r++)t()}createRaindrop(){let e=this.renderer.createElement("div");this.renderer.addClass(e,"rain"),this.renderer.setStyle(e,"left",`${Math.random()*105-2}vw`),this.renderer.setStyle(e,"animation-duration",`${.6+Math.random()*.8}s`),this.renderer.setStyle(e,"animation-delay",`${Math.random()*5}s`),this.renderer.appendChild(this.sceneContainerRef.nativeElement,e),console.log("Raindrop created")}createButterfly(){let e=this.renderer.createElement("div");this.renderer.addClass(e,"butterfly");let n=200+Math.random()*120;e.innerHTML=`
    <svg viewBox="0 0 40 40" style="--wing-color: hsl(${n}, 90%, 70%); --stroke-color: hsl(${n}, 80%, 30%);">
        <path class="wing left-wing" fill="var(--wing-color)" stroke="var(--stroke-color)" d="M 20,20 C 0,0 5,40 20,20 Z"></path>
        <path class="wing right-wing" fill="var(--wing-color)" stroke="var(--stroke-color)" d="M 20,20 C 40,0 35,40 20,20 Z"></path>
    </svg>
`;let t=10+Math.random()*8,i=20+Math.random()*50,o=Math.random()*t;this.renderer.setStyle(e,"top",`${i}vh`),this.renderer.setStyle(e,"animation-duration",`${t.toFixed(2)}s`),this.renderer.setStyle(e,"animation-delay",`-${o.toFixed(2)}s`),this.renderer.appendChild(this.sceneContainerRef.nativeElement,e),console.log("Butterfly created")}static \u0275fac=function(n){return new(n||O)(x(T),x(E))};static \u0275cmp=Y({type:O,selectors:[["app-scenary-one"]],viewQuery:function(n,t){if(n&1&&(M(z,5),M(F,5)),n&2){let i;_(i=S())&&(t.sceneContainerRef=i.first),_(i=S())&&(t.canvasRef=i.first)}},hostBindings:function(n,t){n&1&&b("resize",function(){return t.onResize()},!1,k)},decls:22,vars:6,consts:[["sceneContainer",""],["backgroundCanvas",""],[1,"scene-container"],["id","background-canvas"],[1,"bottom-controls"],[1,"toggle-btn",3,"click"],[1,"controls-content"],[1,"control-group"],["for","rain-slider"],["id","rain-slider","type","range","min","0","max","500",3,"input","value"],["for","butterfly-slider"],["id","butterfly-slider","type","range","min","0","max","20",3,"input","value"]],template:function(n,t){if(n&1){let i=H();c(0,"div",2,0),B(2,"canvas",3,1),u(),c(4,"div",4)(5,"div",5),b("click",function(){return C(i),y(t.isControlsOpen=!t.isControlsOpen)}),g(6," \u2699\uFE0F "),u(),c(7,"div",6)(8,"h2"),g(9,"Scene Controls"),u(),c(10,"div",7)(11,"label",8),g(12,"Rain Amount: "),c(13,"span"),g(14),u()(),c(15,"input",9),b("input",function(r){return C(i),y(t.onRainSliderChange(r))}),u()(),c(16,"div",7)(17,"label",10),g(18,"Butterflies: "),c(19,"span"),g(20),u()(),c(21,"input",11),b("input",function(r){return C(i),y(t.onButterflySliderChange(r))}),u()()()()}n&2&&(v(4),I("open",t.isControlsOpen),v(10),P(t.rainCount),v(),w("value",t.rainCount),v(5),P(t.butterflyCount),v(),w("value",t.butterflyCount))},styles:["[_nghost-%COMP%]{display:block;position:fixed;top:0;left:0;width:100vw;height:100vh;overflow:hidden;z-index:0}.scene-container[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;background:linear-gradient(to bottom,#5f7c8a,#a3bfcf);overflow:hidden}#background-canvas[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;z-index:1}  .rain{position:absolute;top:-20px;width:1.5px;height:20px;background:linear-gradient(to bottom,#4682b4cc,#191970e6);animation-name:_ngcontent-%COMP%_fall;animation-timing-function:linear;animation-iteration-count:infinite;z-index:30}  .butterfly{position:absolute;width:40px;height:40px;z-index:20;animation-name:_ngcontent-%COMP%_fly-path;animation-timing-function:linear;animation-iteration-count:infinite;will-change:transform,left}  .butterfly svg{width:100%;height:100%;overflow:visible}  .butterfly .wing{fill:var(--wing-color);stroke:var(--stroke-color);stroke-width:.8px;transform-origin:20px 20px}  .butterfly .left-wing{animation:_ngcontent-%COMP%_flap-left .25s ease-in-out infinite alternate}  .butterfly .right-wing{animation:_ngcontent-%COMP%_flap-right .25s ease-in-out infinite alternate}@keyframes _ngcontent-%COMP%_fall{0%{transform:translateY(0)}to{transform:translateY(110vh);opacity:0}}@keyframes _ngcontent-%COMP%_fly-path{0%{left:-50px;transform:translateY(0) rotate(15deg)}25%{transform:translateY(-10vh) rotate(-10deg)}50%{transform:translateY(5vh) rotate(20deg)}75%{transform:translateY(-5vh) rotate(-5deg)}to{left:105vw;transform:translateY(2vh) rotate(15deg)}}@keyframes _ngcontent-%COMP%_flap-left{0%{transform:scale(1) rotateY(0)}to{transform:scale(1.1) rotateY(75deg)}}@keyframes _ngcontent-%COMP%_flap-right{0%{transform:scale(1) rotateY(0)}to{transform:scale(1.1) rotateY(-75deg)}}.controls[_ngcontent-%COMP%]{position:absolute;bottom:20px;left:50%;transform:translate(-50%);background:#ffffffb3;padding:2vh 3vw;border-radius:12px;z-index:100;display:flex;gap:25px;align-items:center;box-shadow:0 4px 15px #0000001a}.control-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;color:#333}.control-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:14px;margin-bottom:8px;font-weight:500}.control-group[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:700;color:#007bff}.bottom-controls[_ngcontent-%COMP%]{position:fixed;bottom:20px;right:-260px;width:240px;background:#000000b3;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-top-left-radius:12px;border-bottom-left-radius:12px;padding:20px;color:#fff;z-index:1000;transition:right .4s ease}.bottom-controls.open[_ngcontent-%COMP%]{right:0}.bottom-controls[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]{position:absolute;left:-45px;top:20px;width:40px;height:40px;background:#2a75bb;color:#fff;border-top-left-radius:10px;border-bottom-left-radius:10px;display:flex;align-items:center;justify-content:center;cursor:pointer;font-size:1.2em;box-shadow:0 0 8px #0000004d}.bottom-controls[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.1em;margin-bottom:20px;text-align:center}.bottom-controls[_ngcontent-%COMP%]   .control-group[_ngcontent-%COMP%]{margin-bottom:20px}.bottom-controls[_ngcontent-%COMP%]   .control-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-size:.9em}.bottom-controls[_ngcontent-%COMP%]   .control-group[_ngcontent-%COMP%]   input[type=range][_ngcontent-%COMP%]{width:100%}"]})};export{V as ScenaryOneComponent};
