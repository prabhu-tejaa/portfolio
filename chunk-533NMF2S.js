import{Aa as P,Ca as f,Da as v,Ia as R,Ma as S,Va as b,X as m,Xa as E,Y as g,Ya as s,Za as l,_a as k,bb as T,cb as p,eb as C,fa as O,fb as x,gb as y,hb as d,ib as w}from"./chunk-SQZNMEZU.js";var Y=["sceneContainer"],V=["backgroundCanvas"],z=class _{constructor(t,e){this.renderer=t;this.el=e}sceneContainerRef;canvasRef;rainCount=150;butterflyCount=5;isControlsOpen=!1;ctx;ngAfterViewInit(){this.canvasRef&&(this.ctx=this.canvasRef.nativeElement.getContext("2d"),this.drawScene(),this.updateElements(".rain",this.rainCount,this.createRaindrop.bind(this)),this.updateElements(".butterfly",this.butterflyCount,this.createButterfly.bind(this)))}onResize(){this.drawScene()}onRainSliderChange(t){let e=t.target;this.rainCount=parseInt(e.value,10),this.updateElements(".rain",this.rainCount,this.createRaindrop.bind(this))}onButterflySliderChange(t){let e=t.target;this.butterflyCount=parseInt(e.value,10),this.updateElements(".butterfly",this.butterflyCount,this.createButterfly.bind(this))}drawScene(){if(!this.ctx)return;let t=this.canvasRef.nativeElement;t.width=this.el.nativeElement.offsetWidth,t.height=this.el.nativeElement.offsetHeight,this.ctx.clearRect(0,0,t.width,t.height);let e=["#6B8E23","#556B2F","#8FBC8F"],n=this.drawMountainRange(e[0],.85,200,10),i=this.drawMountainRange(e[1],.75,150,15),r=this.drawMountainRange(e[2],.65,100,20);for(let o=0;o<30;o++){let c=Math.random()*t.width,a=Math.floor(c/(t.width/10));if(a>=n.length-1)continue;let h=n[a].y,B=n[a+1]?n[a+1].y:h,u=n[a].x,I=n[a+1]?n[a+1].x:u,M=h+(B-h)*((c-u)/(I-u||1));M<t.height&&this.drawTree(c,M-5)}console.log("Canvas size:",t.width,t.height)}drawMountainRange(t,e,n,i){let r=this.canvasRef.nativeElement;this.ctx.fillStyle=t,this.ctx.beginPath(),this.ctx.moveTo(-1,r.height);let o=[];for(let c=0;c<=i;c++){let a=r.width/i*c,h=r.height*e-Math.random()*n+n/2;o.push({x:a,y:h}),this.ctx.lineTo(a,h)}return this.ctx.lineTo(r.width+1,r.height),this.ctx.closePath(),this.ctx.fill(),o}drawTree(t,e){this.ctx.fillStyle="#1A4314",this.ctx.fillRect(t-2,e-10,4,10),this.ctx.fillStyle="#228B22",this.ctx.beginPath(),this.ctx.moveTo(t,e-50),this.ctx.lineTo(t-15,e-20),this.ctx.lineTo(t+15,e-20),this.ctx.closePath(),this.ctx.fill(),this.ctx.beginPath(),this.ctx.moveTo(t,e-30),this.ctx.lineTo(t-12,e-10),this.ctx.lineTo(t+12,e-10),this.ctx.closePath(),this.ctx.fill()}updateElements(t,e,n){if(!this.sceneContainerRef)return;let i=this.sceneContainerRef.nativeElement.querySelectorAll(t),r=i.length-e;for(let o=0;o<r;o++)i[o]&&this.renderer.removeChild(this.sceneContainerRef.nativeElement,i[o]);for(let o=0;o<e-i.length;o++)n()}createRaindrop(){let t=this.renderer.createElement("div");this.renderer.addClass(t,"rain"),this.renderer.setStyle(t,"left",`${Math.random()*105-2}vw`),this.renderer.setStyle(t,"animation-duration",`${.6+Math.random()*.8}s`),this.renderer.setStyle(t,"animation-delay",`${Math.random()*5}s`),this.renderer.appendChild(this.sceneContainerRef.nativeElement,t),console.log("Raindrop created")}createButterfly(){let t=this.renderer.createElement("div");this.renderer.addClass(t,"butterfly");let e=200+Math.random()*120;t.innerHTML=`
    <svg viewBox="0 0 40 40" style="--wing-color: hsl(${e}, 90%, 70%); --stroke-color: hsl(${e}, 80%, 30%);">
        <path class="wing left-wing" fill="var(--wing-color)" stroke="var(--stroke-color)" d="M 20,20 C 0,0 5,40 20,20 Z"></path>
        <path class="wing right-wing" fill="var(--wing-color)" stroke="var(--stroke-color)" d="M 20,20 C 40,0 35,40 20,20 Z"></path>
    </svg>
`;let n=10+Math.random()*8,i=20+Math.random()*50,r=Math.random()*n;this.renderer.setStyle(t,"top",`${i}vh`),this.renderer.setStyle(t,"animation-duration",`${n.toFixed(2)}s`),this.renderer.setStyle(t,"animation-delay",`-${r.toFixed(2)}s`),this.renderer.appendChild(this.sceneContainerRef.nativeElement,t),console.log("Butterfly created")}static \u0275fac=function(e){return new(e||_)(v(R),v(O))};static \u0275cmp=S({type:_,selectors:[["app-scenary-one"]],viewQuery:function(e,n){if(e&1&&(C(Y,5),C(V,5)),e&2){let i;x(i=y())&&(n.sceneContainerRef=i.first),x(i=y())&&(n.canvasRef=i.first)}},hostBindings:function(e,n){e&1&&p("resize",function(){return n.onResize()},!1,P)},decls:22,vars:6,consts:[["sceneContainer",""],["backgroundCanvas",""],[1,"scene-container"],["id","background-canvas"],[1,"bottom-controls"],[1,"toggle-btn",3,"click"],[1,"controls-content"],[1,"control-group"],["for","rain-slider"],["id","rain-slider","type","range","min","0","max","500",3,"input","value"],["for","butterfly-slider"],["id","butterfly-slider","type","range","min","0","max","20",3,"input","value"]],template:function(e,n){if(e&1){let i=T();s(0,"div",2,0),k(2,"canvas",3,1),l(),s(4,"div",4)(5,"div",5),p("click",function(){return m(i),g(n.isControlsOpen=!n.isControlsOpen)}),d(6," \u2699\uFE0F "),l(),s(7,"div",6)(8,"h2"),d(9,"Scene Controls"),l(),s(10,"div",7)(11,"label",8),d(12,"Rain Amount: "),s(13,"span"),d(14),l()(),s(15,"input",9),p("input",function(o){return m(i),g(n.onRainSliderChange(o))}),l()(),s(16,"div",7)(17,"label",10),d(18,"Butterflies: "),s(19,"span"),d(20),l()(),s(21,"input",11),p("input",function(o){return m(i),g(n.onButterflySliderChange(o))}),l()()()()}e&2&&(f(4),E("open",n.isControlsOpen),f(10),w(n.rainCount),f(),b("value",n.rainCount),f(5),w(n.butterflyCount),f(),b("value",n.butterflyCount))},styles:["[_nghost-%COMP%]{display:block;position:fixed;top:0;left:0;width:100vw;height:100vh;overflow:hidden;z-index:0}.scene-container[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;background:linear-gradient(to bottom,#5f7c8a,#a3bfcf);overflow:hidden}#background-canvas[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;z-index:1}  .rain{position:absolute;top:-20px;width:1.5px;height:20px;background:linear-gradient(to bottom,#4682b4cc,#191970e6);animation-name:_ngcontent-%COMP%_fall;animation-timing-function:linear;animation-iteration-count:infinite;z-index:30}  .butterfly{position:absolute;width:40px;height:40px;z-index:20;animation-name:_ngcontent-%COMP%_fly-path;animation-timing-function:linear;animation-iteration-count:infinite;will-change:transform,left}  .butterfly svg{width:100%;height:100%;overflow:visible}  .butterfly .wing{fill:var(--wing-color);stroke:var(--stroke-color);stroke-width:.8px;transform-origin:20px 20px}  .butterfly .left-wing{animation:_ngcontent-%COMP%_flap-left .25s ease-in-out infinite alternate}  .butterfly .right-wing{animation:_ngcontent-%COMP%_flap-right .25s ease-in-out infinite alternate}@keyframes _ngcontent-%COMP%_fall{0%{transform:translateY(0)}to{transform:translateY(110vh);opacity:0}}@keyframes _ngcontent-%COMP%_fly-path{0%{left:-50px;transform:translateY(0) rotate(15deg)}25%{transform:translateY(-10vh) rotate(-10deg)}50%{transform:translateY(5vh) rotate(20deg)}75%{transform:translateY(-5vh) rotate(-5deg)}to{left:105vw;transform:translateY(2vh) rotate(15deg)}}@keyframes _ngcontent-%COMP%_flap-left{0%{transform:scale(1) rotateY(0)}to{transform:scale(1.1) rotateY(75deg)}}@keyframes _ngcontent-%COMP%_flap-right{0%{transform:scale(1) rotateY(0)}to{transform:scale(1.1) rotateY(-75deg)}}.controls[_ngcontent-%COMP%]{position:absolute;bottom:20px;left:50%;transform:translate(-50%);background:#ffffffb3;padding:2vh 3vw;border-radius:12px;z-index:100;display:flex;gap:25px;align-items:center;box-shadow:0 4px 15px #0000001a}.control-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;color:#333}.control-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:14px;margin-bottom:8px;font-weight:500}.control-group[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:700;color:#007bff}.bottom-controls[_ngcontent-%COMP%]{position:fixed;bottom:20px;right:-260px;width:240px;background:#000000b3;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-top-left-radius:12px;border-bottom-left-radius:12px;padding:20px;color:#fff;z-index:1000;transition:right .4s ease}.bottom-controls.open[_ngcontent-%COMP%]{right:0}.bottom-controls[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]{position:absolute;left:-45px;top:20px;width:40px;height:40px;background:#2a75bb;color:#fff;border-top-left-radius:10px;border-bottom-left-radius:10px;display:flex;align-items:center;justify-content:center;cursor:pointer;font-size:1.2em;box-shadow:0 0 8px #0000004d}.bottom-controls[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.1em;margin-bottom:20px;text-align:center}.bottom-controls[_ngcontent-%COMP%]   .control-group[_ngcontent-%COMP%]{margin-bottom:20px}.bottom-controls[_ngcontent-%COMP%]   .control-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-size:.9em}.bottom-controls[_ngcontent-%COMP%]   .control-group[_ngcontent-%COMP%]   input[type=range][_ngcontent-%COMP%]{width:100%}"]})};export{z as ScenaryOneComponent};
